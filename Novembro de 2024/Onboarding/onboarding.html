<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="onboarding.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>OpenVoice</title>
    
    <!-- Fonte Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    
    <link rel="alternate" title="Login Form">
    
</head>
<body>
    
    <!-- Formulário de Login -->
    <div class="loginForm">
        <form method="POST">
            <label for="username" id="title" class="label">Nome de Usuário ou Email</label>
            <input type="text" id="username" class="text-input" autocomplete="off" name="username" required>
            <span id="name-validation" aria-live="assertive" class="validation-message"></span>
            <button type="submit">Entrar</button>
        </form>
     </div>
  
     <select id="language-selector">
         <option value="en">English</option>
         <option value="pt">Português</option>
         <option value="es">Español</option>
    </select>
    
    <script>

        // Obter idioma do navegador
         const userLocale = navigator.language || navigator.userLanguage;
         
         // Definir traduções
         const translations = {
             "en": {
                 title: "Username or Email",
                },
                "pt": {
                title: "Nome de Usuário ou Email",
            },
            "es": {
                title: "Nombre de Usuario o Correo Eletrónico",
            },
        };

        // Função para aplicar as traduções
        function applyLocalization(locale){
            
            // Extraindo a língua principal
            const language = locale.split('-')[0];
            
            // Selecionar traduções, com fallback para Inglês
            const translation = translations[language] || translations['en'];
            
            // Alterar o conteúdo
            document.getElementById('title').innerText = translation.title;
            
            // Atualizar o atributo Lang da página
            document.documentElement.lang = locale;
        }
        
        // Aplicar as traduções ao carregar a página
        document.addEventListener("DOMContentLoaded", () => {
            applyLocalization(userLocale);
            
            // Adicionar evento para troca de idioma no dropdown
            const languageSelector = document.getElementById('language-selector');
            languageSelector.addEventListener('change', (event) => {
                applyLocalization(event.target.value);
            });
        });

        
        // Mensagem de validação em diferentes idiomas
        const validationMessages = {
            "en": "Please enter your username or email.",
            "pt": "Por favor, insira o seu nome de usuário ou email.",
            "es": "Por favor, introduzca su nombre de usuario o correo eletrónico."
        };

        // Função para obter mensagem de validação com base no idioma com fallback para inglês
        function getValidationMessage(locale){
            return validationMessages[locale] || validationMessages['en'];
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            

            // Selecionar o campo de entrada
            const nameInput = document.querySelector('[name="username"]');
            const languageSelector = document.getElementById('language-selector');

            // Obter idioma salvo ou do navegador
            const savedLocale = localStorage.getItem('preferredLanguage') || userLocale;
            applyLocalization(savedLocale);

            // Adicionar evento de validação
            nameInput.addEventListener('invalid', () => {
                nameInput.setCustomValidity(getValidationMessage(savedLocale));
            });

            // Limpar a mensagem personalizada quando o usuário corrigir o valor
            nameInput.addEventListener('input', () => {
                nameInput.setCustomValidity('');
            });

            
            // Definir idioma conforme dropdown
            languageSelector.addEventListener('change', (event) => {
                const selectedLanguage = event.target.value;

                // Aplicar a localização com o idioma localizado
                applyLocalization(selectedLanguage);
                
                // Salvar o idioma selecionado no LocalStorage
                localStorage.setItem('preferredLanguage', selectedLanguage);

            });
        });


        // reCAPTCHA
        

    </script>
</body>
</html>